{"version":3,"sources":["ui/ui_fieldlist.js"],"names":["define","analysisTypes","uiElement","leonardoui","$q","createFieldList","app","fieldList","defer","createGenericObject","qInfo","qType","qFieldListDef","qShowSystem","qShowHidden","qShowDerivedFields","qShowSemantic","qShowSrcTables","qShowImplicit","reply","items","qFieldList","qItems","sort","a","b","qName","toString","toLowerCase","$","each","key","value","push","label","autocalendar","qDerivedFieldData","derivedField","derivedItems","qDerivedFieldLists","qFieldDefs","qMethod","destroySessionObject","qId","resolve","promise"],"mappings":"AAAA,YAAAA,SACE,uBACA,eACA,+BACA,SACC,SAACC,EAAeC,EAAWC,EAAYC,GACxC,OACEC,gBADK,SACWC,GACd,GAAMC,MACAC,EAAQJ,EAAGI,OAoDjB,OAlDAF,GAAIG,qBACFC,OACEC,MAAO,aAETC,eACEC,aAAa,EACbC,aAAa,EACbC,oBAAoB,EACpBC,eAAe,EACfC,gBAAgB,EAChBC,eAAe,IAEhB,SAASC,GACV,GAAIC,GAAQD,EAAME,WAAWC,MAmC7B,OAhCAF,GAAQA,EAAMG,KAAK,SAACC,EAAGC,GAGrB,MAFAD,GAAIA,EAAEE,MAAMC,WAAWC,cACvBH,EAAIA,EAAEC,MAAMC,WAAWC,cACnBJ,EAAIC,KAEGD,EAAIC,EACN,EAEF,IAGTI,EAAEC,KAAKV,EAAO,SAACW,EAAKC,GAElB,GADAzB,EAAU0B,MAAOC,MAAOF,EAAMN,MAAOM,MAAOA,EAAMN,MAAOS,aAAiD,mBAA3BH,GAAMI,kBAAoCC,cAAc,IACjG,mBAA3BL,GAAMI,kBAAmC,CAClD,GAAIE,GAAeN,EAAMI,kBAAkBG,mBAAmB,GAAGC,UAEjEF,GAAeA,EAAaf,KAAK,SAACC,EAAGC,GAGnC,MAFAD,GAAIA,EAAEiB,QAAQd,WAAWC,cACzBH,EAAIA,EAAEgB,QAAQd,WAAWC,cACrBJ,EAAIC,KAEGD,EAAIC,EACN,EAEF,IAETI,EAAEC,KAAKQ,EAAc,SAACP,EAAKC,GACzBzB,EAAU0B,MAAOC,MAAOF,EAAMS,QAAST,MAAOA,EAAMN,MAAOS,cAAc,EAAOE,cAAc,SAIpG/B,EAAIoC,qBAAqBvB,EAAMT,MAAMiC,KAC9BnC,EAAMoC,QAAQrC,KAEhBC,EAAMqC","file":"../../js/ui/ui_fieldlist.js","sourcesContent":["define([\r\n  '../analysis/analysis',\r\n  './ui_element',\r\n  '../../vendor/leonardo-ui.min',\r\n  'ng!$q',\r\n], (analysisTypes, uiElement, leonardoui, $q) => {\r\n  return {\r\n    createFieldList(app) {\r\n      const fieldList = [];\r\n      const defer = $q.defer();\r\n\r\n      app.createGenericObject({\r\n        qInfo: {\r\n          qType: 'FieldList',\r\n        },\r\n        qFieldListDef: {\r\n          qShowSystem: false,\r\n          qShowHidden: false,\r\n          qShowDerivedFields: true,\r\n          qShowSemantic: true,\r\n          qShowSrcTables: true,\r\n          qShowImplicit: true,\r\n        },\r\n      }, function(reply) {\r\n        var items = reply.qFieldList.qItems;\r\n\r\n        // Sort items\r\n        items = items.sort((a, b) => {\r\n          a = a.qName.toString().toLowerCase();\r\n          b = b.qName.toString().toLowerCase();\r\n          if (a < b) {\r\n            return -1;\r\n          } else if (a > b) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        });\r\n\r\n        $.each(items, (key, value) => {\r\n          fieldList.push({ label: value.qName, value: value.qName, autocalendar: (typeof value.qDerivedFieldData != 'undefined' ), derivedField: false })\r\n          if (typeof value.qDerivedFieldData != 'undefined' ) {\r\n            var derivedItems = value.qDerivedFieldData.qDerivedFieldLists[0].qFieldDefs;\r\n            // Sort derivedItems in alphabetical order\r\n            derivedItems = derivedItems.sort((a, b) => {\r\n              a = a.qMethod.toString().toLowerCase();\r\n              b = b.qMethod.toString().toLowerCase();\r\n              if (a < b) {\r\n                return -1;\r\n              } else if (a > b) {\r\n                return 1;\r\n              }\r\n              return 0;\r\n            });\r\n            $.each(derivedItems, (key, value) => {\r\n              fieldList.push({ label: value.qMethod, value: value.qName, autocalendar: false, derivedField: true })\r\n            });\r\n          }\r\n        });\r\n        app.destroySessionObject(reply.qInfo.qId);\r\n        return defer.resolve(fieldList);\r\n      });\r\n      return defer.promise;\r\n    },\r\n  };\r\n});\r\n"]}