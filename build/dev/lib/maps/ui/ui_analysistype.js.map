{"version":3,"sources":["ui/ui_analysistype.js"],"names":["define","uiElement","leonardoui","registerEvents","$scope","$compile","listAnalysisCategoriesPopover","listAnalysisCategoriesButton","listAnalysisCategories","$event","active","element","currentTarget","popover","content","listAnalysisCategoriesElement","closeOnEscape","dock","alignTo","onClose","$apply","scope","$","drilldownAnalysisCategory","selectedAnalysisCategoryId","html","listAnalysisTypesElement","goBackAnalysisCategory","replaceWith","selectAnalysisType","analysisTypeId","backendApi","applyPatches","qPath","qOp","qValue","JSON","stringify","close","removeAnalysisTypeSelection"],"mappings":"AAAA,YAAAA,SACE,eACA,gCACC,SAACC,EAAWC,GACb,OACEC,eADK,SACUC,EAAQC,GAGrB,GAAIC,GAAgC,IACpCF,GAAOG,gCACPH,EAAOI,uBAAyB,SAACC,GAC/B,GAAIL,EAAOG,6BAA6BG,OAEtCN,EAAOG,6BAA6BG,QAAS,MACxC,CACLN,EAAOG,6BAA6BG,QAAS,CAC7C,IAAMC,GAAUF,EAAOG,aACvBN,GAAgCJ,EAAWW,SACzCC,QAASb,EAAUc,8BACnBC,eAAe,EACfC,KAAM,QACNC,QAASP,EACTQ,QALiD,WAM/Cf,EAAOgB,OAAO,SAACC,GACbA,EAAMd,6BAA6BG,QAAS,OAIlDL,EAASiB,EAAE,0BAA0BlB,KAKzCA,EAAOmB,0BAA4B,SAACC,GAClCpB,EAAOoB,2BAA6BA,EAEpCF,EAAE,mBAAmBG,KAAKxB,EAAUyB,0BACpCrB,EAASiB,EAAE,oBAAoBlB,IAIjCA,EAAOuB,uBAAyB,WAC9BL,EAAE,mBAAmBM,YAAY3B,EAAUc,+BAC3CV,EAASiB,EAAE,oBAAoBlB,IAIjCA,EAAOyB,mBAAqB,SAACL,EAA4BM,GACvD1B,EAAO2B,WAAWC,eAEdC,MAAO,4BACPC,IAAK,UACLC,OAAQC,KAAKC,UAAUb,KAGvBS,MAAO,wBACPC,IAAK,UACLC,OAAQC,KAAKC,UAAUP,MAExB,GAEHxB,EAA8BgC,SAIhClC,EAAOmC,4BAA8B,WACnCnC,EAAO2B,WAAWC,eAEdC,MAAO,4BACPC,IAAK,UACLC,OAAQC,KAAKC,gBAGbJ,MAAO,wBACPC,IAAK,UACLC,OAAQC,KAAKC,iBAEd","file":"../../js/ui/ui_analysistype.js","sourcesContent":["define([\r\n  './ui_element',\r\n  '../../vendor/leonardo-ui.min',\r\n], (uiElement, leonardoui) => {\r\n  return {\r\n    registerEvents($scope, $compile) {\r\n\r\n      // Popover of Analysis Categories\r\n      let listAnalysisCategoriesPopover = null;\r\n      $scope.listAnalysisCategoriesButton = {};\r\n      $scope.listAnalysisCategories = ($event) => {\r\n        if ($scope.listAnalysisCategoriesButton.active) {\r\n          // popover.close();\r\n          $scope.listAnalysisCategoriesButton.active = false;\r\n        } else {\r\n          $scope.listAnalysisCategoriesButton.active = true;\r\n          const element = $event.currentTarget;\r\n          listAnalysisCategoriesPopover = leonardoui.popover({\r\n            content: uiElement.listAnalysisCategoriesElement,\r\n            closeOnEscape: true,\r\n            dock: 'right',\r\n            alignTo: element,\r\n            onClose() {\r\n              $scope.$apply((scope) => {\r\n                scope.listAnalysisCategoriesButton.active = false;\r\n              });\r\n            },\r\n          });\r\n          $compile($('div.lui-popover__body'))($scope);\r\n        }\r\n      };\r\n\r\n      // Drill down analysis category event\r\n      $scope.drilldownAnalysisCategory = (selectedAnalysisCategoryId) => {\r\n        $scope.selectedAnalysisCategoryId = selectedAnalysisCategoryId;\r\n\r\n        $('div.lui-popover').html(uiElement.listAnalysisTypesElement);\r\n        $compile($('div.lui-popover'))($scope);\r\n      };\r\n\r\n      // Go back to analysis categories list event\r\n      $scope.goBackAnalysisCategory = () => {\r\n        $('div.lui-popover').replaceWith(uiElement.listAnalysisCategoriesElement);\r\n        $compile($('div.lui-popover'))($scope);\r\n      };\r\n\r\n      // Selet analysis type\r\n      $scope.selectAnalysisType = (selectedAnalysisCategoryId, analysisTypeId) => {\r\n        $scope.backendApi.applyPatches([\r\n          {\r\n            qPath: '/props/analysisCategoryId',\r\n            qOp: 'replace',\r\n            qValue: JSON.stringify(selectedAnalysisCategoryId),\r\n          },\r\n          {\r\n            qPath: '/props/analysisTypeId',\r\n            qOp: 'replace',\r\n            qValue: JSON.stringify(analysisTypeId),\r\n          },\r\n        ], false);\r\n\r\n        listAnalysisCategoriesPopover.close();\r\n      };\r\n\r\n      // Remove analysis type\r\n      $scope.removeAnalysisTypeSelection = () => {\r\n        $scope.backendApi.applyPatches([\r\n          {\r\n            qPath: '/props/analysisCategoryId',\r\n            qOp: 'replace',\r\n            qValue: JSON.stringify(-1),\r\n          },\r\n          {\r\n            qPath: '/props/analysisTypeId',\r\n            qOp: 'replace',\r\n            qValue: JSON.stringify(-1),\r\n          },\r\n        ], false);\r\n      };\r\n    },\r\n  };\r\n});\r\n"]}